1. 熟悉模块：
注：用户和客户不是同一个概念，用户是指小程序的用户，客户是指小程序用户的客户。用户所得积分在管理后台应该是不可以调整的。
1.1 列表页：
[图片]
1.1.1 显示逻辑：
- 页面最上方，中间是当前模块的Logo，右侧是特权按钮，点击特权按钮弹出对话框，显示用户vip等级情况以及充值按钮，逻辑同线下模块通用逻辑。
- 在Logo下方，显示该模块的说明文字，该说明文字需要支持在管理后台配置。
- 在说明文字下方，为该模块的订单List，每个ListItem包括左上角的浅粉色角标，任务名称，任务状态。
  - 任务状态：
    1. 回合和回合之间倒计时，显示“下次聊天开启倒计时”+具体倒计时时间；
    2. 阶段和阶段之间倒计时，显示“下次聊天开启倒计时”+具体倒计时时间；
    3. Z /AZ（用户界面AZ显示为Z）倒计时，显示“Z倒计时”+具体倒计时时间；
    4. D/AD（用户界面AD显示为D）后直接给出内容，没有倒计时，显示D
    5. 用户点击对方找按钮后的倒计时：显示“对方找倒计时”+具体倒计时时间；
    6. 其他状态，显示“聊天任务进行中”；（即用户在正常和橙子小程序进行对话中的状态）
- 页面最下方显示“创建熟悉订单”按钮，按钮层级在最上方，可以盖住订单List。
1.1.2 交互逻辑：
- 点击页面最上方的特权按钮，逻辑同A0（图文模块）；
- 左滑ListItem，点击每个ListItem的“续时”按钮：则页面覆盖蒙版并弹出对话框，对话框显示逻辑：对话框title显示“请选择续时周期”，内容显示三个续时周期单选项，“5天”、“9天、“16天”，最下方显示“确定”和“取消”两个按钮。金额待定$金额#对话框
  - 确定按钮：三个续时项三选一后，点击确定按钮，如果余额足够续时则后台进行续时，关闭对话框并弹出3秒钟Toast“续时成功，请继续使用”。如果余额不足，则不关闭对话框并弹出Toast“余额不足，请充值后再进行续时。”
  - 取消按钮：点击取消则关闭对话框。
  - 其他交互：点击对话框外侧蒙版关闭对话框。
[图片]
- 左滑ListItem，点击每个ListItem的“删除”按钮：则页面覆盖蒙版并弹出对话框（同ListItem的续时按钮弹窗），对话框显示逻辑：对话框title显示“删除订单”，内容显示“删除后该订单不能恢复，请确认是否删除”，最下方显示“确定”和“取消”两个按钮。#对话框
  - 对话框按钮：点击确定按钮则删除该任务并关闭对话框，点击取消则关闭对话框。
  - 其他交互：点击对话框外侧蒙版关闭对话框。
[图片]
- 点击“创建熟悉订单”按钮：则弹出对话框，对话图Title显示“创建熟悉订单”，输入框Hint提示文字显示“请输入名称，最多可输入6个字”，输入框最多只能输入6个字。#对话框
  - 如果用户输入超过1个字，则点击确定按钮，熟悉订单创建成功，页面进入下一级页面，即下一章问卷调查页。
  - 如果用户一个字未输入，则点击确定按钮，则弹出Toast“请输入熟悉订单名称后再次提交。”
[图片]
- 点击每个ListItem的按钮以外的部分，则进入到该订单的详情页，不同阶段的订单，进入后显示的页面不同：
  - 未完成问卷：进入到问卷页；
  - 已完成问卷：进入到对话页；
1.2 对话逻辑描述：
熟悉模块包括 5 个阶段，每个阶段包括 xx 个回合。(根据用户使用过程中的操作，所激发 的相应程序规则，决定回合数为多少)。
- 第零阶段，程序预设问题，用户手动回答。 
- 第一阶段，抽取的库次序固定。 
- 第二阶段，开场库和离开库为固定库。内容库在前两个回合随机抽取，第三第四回合为固定库。 
- 第三阶段，开场库和离开库为固定库。内容库在前两个回合随机抽取，第三第四回合为固定库。 
- 第四阶段，本身有一个回合，有返回第三阶段的可能，若回合顺利完成，提示板提示后，对话结束。 
1. 用户创建任务：可以选择5天46人民币、9天75人民币、16天98人民币三个档位的任务有效期；
2. 对话续费的逻辑：5天46人民币、9天75人民币、16天98人民币；
3. 下文中的大CD还是回合之间的大CD，阶段之间的大CD会标明出来；
4. 每个阶段进入下一阶段时 需要经过一个阶段间的大CD，大CD结束后才能开始聊下一阶段的内容
5. 红色提示板，是表示用户可以点击确定结束任务；
6. 半价重置：在订单（任务）有效期内，用户点击半价重置可以按半价价格进行充值，如果超过有效期了，则用户点击半价重置，弹出提示框。
7. 那么这个阶段间的大CD如何计算: 每阶段进入下一阶段的大CD时间，按进入下一阶段前最后一个回 合前的大CD时间来算。
以熟悉模块三阶段进入四阶段 为例说明:若用户在三阶段第二个 回合分数就够了，进入了四阶段，则三阶段到四阶段的阶段间大 CD则与三阶段第二个回合前的大CD相同。若用户在三阶段第3.5 个回合分数够，进入四阶段，则阶段间大CD与第3.5个回合前的 大CD相同。 
1.3 第0阶段：
1.3.1 问卷分值：
问卷共有5个问题，每个问题有5个回答。系统通过其中前3个主要问题判断用户与对方处于陌生/不熟/还是熟悉关系。后两个问题可以不配置分值。
问题一
选项A（0分），选项B（0分），选项C（0分），选项D（0分），选项E（0分）
问题二
选项A（0分），选项B（4分），选项C（5分），选项D（7分），选项E（4分）
问题三
选项A（0分），选项B（0分），选项C（6分），选项D（10分），选项E（10分）
问题四
选项A（0分），选项B（0分），选项C（0分），选项D（0分），选项E（0分）
1.3.2 逻辑描述：
X（问卷所有题目选项总分达）到10分或以上照常使用熟悉模块，总分不足10分 分配到不熟模块。
TODO缺提示板S1、S2、S3、S4。
[图片]
1.3.2.1 逻辑图中的粉色操作弹窗：
- 问一：为用户根据问题内容选择选项：
  - 问题内容：“有对方微信或其他线上可交流方式吗？”。
  - 选项：“是”和“否”；
- 问二：为用户根据问题内容选择选项：
  - 问题内容：“需要让对方见不到您20天左右。其中前10天左右什么也不用做，后10天左右请根据之后指引操作，确定可以开始并准备好之后请选“是”（即是否准备好）”
  - 选项：“是”和“否”；
- 问三：为用户根据问题内容选择选项：
  - 问题内容：“请确定完成第一阶段，即倒计时结束前未与对方见面或主动联系，是或否？”
  - 选项：“是”和“否”；
1.3.2.2 细分逻辑：
用户先在问卷中进行答题，根据答题所得的分数，与阈值X进行对比：
- 如果得分≥X，则弹出对话框“问1”：
  - 如果用户选择“是”，则进入提示框“问2”：
    - 如果用户选择“是”，则直接显示提示板“S2”，用户点击确定后，则进入9-10天的倒计时；
      - 倒计时结束后，弹出提示板“问3”，
        - 用户选择“是”，则直接显示提示板“S4”，用户点击确定后，则进入XX-XX天的倒计时，倒计时结束后进入阶段一；同时激活该用户在图文模块的图文特殊库权限，该用户可以进入图文模块，看到一条特殊内容，如果该用户之前已经通过其他任务有了图文特殊库的权限，则新任务的图文特殊库内容覆盖原图文特殊库返回的内容，在6-9天的时间范围内随机一个时间，达到随机时间后，刷新该用户图文特殊库的返回内容。TODO档4内容是啥？
        - 用户选择“否”，则直接显示提示板“S3”，用户点击确定后，则用户需要再次选择“问2”的选择“是”或“否”；
    - 如果用户选择“否”，则直接显示提示板“S3”，用户点击确定后，则用户需要再次选择“问2”的选择“是”或“否”；
  - 如果用户选择“否”，则显示提示板“S1”，用户点击确定后，则用户需要再次选择“问1”的“是”或“否”；
- 如果得分＜X，则弹出对话框“问1”，如果用户选择“是”，则直接进入“不熟模块”，如果用户选择“否”，则进入“陌生模块”；
1.3.3 问卷界面：
[图片]
1.3.4 显示逻辑：
问卷所有题目纵向平铺在页面上，用户可以滑动页面查看第一题到最后一题。问卷为选择题，一共5道题，每道题5个选项。
注：所有题目支持在管理后台编辑题目本身和选项以及选项的分值。
1.3.5 交互逻辑：
- 点击充值按钮，则进入充值页面，逻辑为：5天-138元，9天-225元，16天-294元，（不同模块充值时长相同，价格不同）
- 问卷中选择题都是单选题，用户点击一个选项，则其他选项就取消勾选。
- 点击“提交按钮”：
  - 如果问卷所有选择题目都已经做出了选择，则弹出对话框，此对话框Title为温馨提示，内容显示“您已完成了所有问卷内容的填写，请确认是否提交”，点击确定则提交成功进入用户方案界面，点击取消则关闭对话框。#对话框
  - 如果问卷选择题都有题目没有做出选择，此对话框Title为“温馨提示”，内容显示“您还未完成所有问卷内容的填写，请完成所有题目填写后提交”，点击确定则关闭对话框。此对话框没有取消按钮。#对话框
- 点击“返回按钮”：则弹出对话框，此对话框Title为“温馨提示”，内容显示“您未完成问卷填写，请确认是否要返回”，点击确定则回到熟悉首页，点击取消则关闭对话框；#对话框
- 点击左上角“<”返回按钮：则弹出对话框，此对话框Title为“温馨提示”，内容显示“您未完成问卷填写，请确认是否要返回”，点击确定则回到熟悉首页，点击取消则关闭对话框；#对话框
1.4 对话页面：
[图片]
[图片]
[图片]
1.4.1 显示逻辑：
注意：王先生的咨询就是这个任务的名称而已。
1.4.1.1 通用样式：
- 搜索问答：搜索页面最上方显示搜索框，用户录入搜索内容，点击搜索，弹出对话框样式如下，其中显示金额，每次不同，下一次是上一次搜索问答的1.6倍，上线前1.6倍需要TODO陈总确认。：
[图片]
- 帮助按钮：在页面右下角显示小问号。
1.4.1.2 通用逻辑：
[图片]
- 对方找：对方找按钮默认是置灰的，需要在进入大CD后，等待一段倒计时的时间（管理后台配置）后才可以点击。时间达到对方找按钮激活状态，后对方找按钮可点击，点击对方找后弹出对话框显示给出的内容，在对话框中显示对方找的内容，同时默认复制按钮置灰暂时不可点击（并且该页面附有原因说明），显示新的倒计时（管理后台配置），倒计时结束后，复制按钮恢复可点击状态。
  - 对方找按钮可点击的倒计时：即管理后台的对主动等待时间，即用户点击对主动按钮之后的CD，CD结束后，对主动按钮才可以变成可点击，用户点击后对主动库回复给用户对主动库中的内容；
  - 对方找CD时间：即管理后台的对主动CD时间，即用户点击最后一条对主动库内容的复制按钮后还有个CD，CD完成后进入下一回合；
  - 对方找复制按钮可点击的倒计时：在管理后台做成各个模块配置各自的对方找复制按钮可用时间。
  - 每个回合对方找只返回4条内容，用户点完复制之后，不会有内容再返回给用户，点击关闭对话框就进入下一个节点。
[图片]
[图片]
- 未操作超时分支：
  - 长时间未操作的时间是40分钟，如果超过了40分钟（预设时间，后续可以调整）未操作，则弹出对话框“对话框内容待定”，对话框下方有三个选项：对方未回复、自己离开了、对方已回复，供用户自己选择。弹出对话框并不影响倒计时，如果超过2小时用户没有交互，则进入大CD。只有用户点击了复制按钮后，未操作的倒计时才重置。
  - 如果用户点击了对方未回复，显示一个Popup“请等待对方回复后再操作”。
  - 如果用户点击了对方已回复，则关闭对话框。
  - 如果用户点击了自己离开了，弹出相应的提示板（用户如果长时间未操作则弹出提示板，询问用户是自己离开还是对方未回，用户选择自己离开弹出后续提示板，用户手动关闭或倒计时结束后关闭，恢复正常对话，用户选择对方未回则继续等待，直至回合时间结束 默认进入大CD）
- 问答分支：用户在对话页面的输入框输入需要查询的内容，然后点击搜索，可以查询对应问题的答案，此搜索为模糊搜索。
  1. 不同等级VIP间可查看条数不同。 
  2. 回合对话页面上方提供输入框，用户进入回合后，可在搜索栏中输入（或粘贴）所遇到的问题描述（文字，符号，表情）。确认后，程序应在该回合的对应会话资料库中搜索并显示应答内容。
  3. 程序向用户展示一定数量的应答内容，最多4条内容（用户根据vip级别能查看到2~4条不等）。用户点击选择一条（不可多选，选择那一条就继续给出该条内容，直至该条内容给完，且在给出内容过程中，遵循该条内容中所设置符号规则，如果该条内容给完没有后续符号的情况默认进入最近一个AZ,AZ效果结束后，再继续AZ之后内容）信息时，程序应将该条内容复制到手机的粘贴板中。当完成复制后，从搜索答案中删除该条内容，之后页面置灰3.5秒（显示允许操作倒计时时间），此期间用户无法在页面中进行复制操作。
1.4.1.3 大CD页面：
如图一：大CD页面是一个纯倒计时的页面，页面上没有库返回内容，只有对方找这个按钮，对方找按钮是大圆按钮，上方是多久可以使用对方找的倒计时（后台配置），下方是大CD的倒计时。当对方找的倒计时结束后。
1.4.1.4 出现Z的情况：
如图二：当库内容返回出现Z或AZ的时候，界面显示样式变为大“Z”按钮，并出现6~12分钟的倒计时，倒计时期间，用户可自由在微信（不仅限微信）上发送内容，倒计时结束后，页面样式恢复到默认情况，程序给出后续内容。
1.4.1.5 出现D的情况：
如图三：当库内容返回出现D或AD的时候，显示样式变为大“D”按钮。大D按钮下方显示对大D按钮的说明，此时不显示对方找。
1.4.2 交互逻辑：
搜索问答的库逻辑和开场、内容库、离库没关系。搜索出来的问题的答案，应该是一个弹窗，用户点击复制按钮，四条内容只留一条，按照第一条的路径给出剩余的内容。同内容库的逻辑。
- 回复内容的逻辑：等级和映射关系表。
  - 系统按照vip等级权限给出相应几个编号内容（TODO最多4条，可能不满4条），同一个“订单(任务)”内，用户点击复制按钮选择过的编号，不会被再次抽取，点击复制按钮选择的该编号下的内容链按符号分隔分段显示给用户，用户点击复制后，闪现1秒半透明的文字提示“复制成功，请尽快粘贴。后期不再提示”（每个用户账号总显示20次，可以是任意模块叠加，也可是单一模块累计），且有2s的小CD，此时复制按钮呈灰色不可点击状态（2s倒计时显示在按钮上），2s后自动给出该编号的后续内容，如果是文字内容，复制按钮恢复可点击状态，用户可再次复制；如果是Z或D，则按Z或D的符号设定继续。
  - 内容库（含开库、内容库、离库等）的逻辑是先选其中一个编号的内容。比如1是中文、2是英语、3是日语，如果用户选了1，则把所有的中文的内容都给完。如果出现了一个库在同一个阶段的不同回合内可以被重复使用，则上一个回合返回给用户的内容，在下一回合不会返回给用户。
  - 所有库的内容都是链表式结构。用户进入的时候随机抽取4条标签。供用户选择。之后会把当前内容按链条完全给完之后才会进入下一个内容库。这个是标准流程。只有用户长时间未点击。或超过回合允许时间。或该处设置有结束符号。三种情况会停止内容的继续提供
- 每条内容后的复制按钮：复制内容不是完整的全链路直接给出，而是按照符号分隔，分段给（如一句话中有@符号，先给@前的内容，点击复制后，再接着给@后的内容），点击复制按钮，则将该条内容复制到粘贴版，用户可以在微信中粘贴该条内容。点下复制按钮后，其他行内容消失，只保留本行内容，同时复制按钮置灰的2s（管理后台可配置）。下一条内容倒计时结束前，可以多次点击复制按钮。倒计时结束后，给出下一条内容。
- 点击对方找：同上对方找逻辑。
- 点击按钮D：用户点击D，程序再给出一条新的内容。
- 点击按钮Z：用户点击Z，弹出对话框“倒计时结束后，将回复新内容”。
1.5 第一阶段：
[图片]
1.5.1 不同回合选取库逻辑描述：

回合数
库
回若从该回合进入2阶段，
则阶段间的大CD为：
熟悉模块一阶段
一回合
内容库S1、离库S1
不能进入第二阶段

二回合
内容库S2、离库S2
不能进入第二阶段

三回合
内容库S3、离库S2
不能进入第二阶段

四回合（前三回合分够进入本次循环）
内容库S4、离库S3
大CD * 1

1.5特殊回合a（前三回合分不够进入本循环）
内容库S5、离库S2
大CD * 2

1.5特殊回合b（1.5a分不够进入本循环）
内容库S4.5、离库S3.5
大CD * 2

其他
对主动库S2，问答库S1

提示板：熟悉提示S5、熟悉提示S6、熟悉提示S8、熟悉提示S9、熟悉提示S31
1.5.2 逻辑描述：
- 熟悉模块第一阶段，先进行三个回合的聊天，随后进入第三回合和下一回合的大CD前先进行判分，前三个回合的总得分分数大于等于X则进入第四回合，分数小于X则大CD✖️2后进入第五回合，第五回合后 进入大CD前，判断当前得分，与前三个回合的总得分是否相等，相等则大CD✖️2后进入第六回合，不相等则进入3-5天阶段间倒计时
- 进入第一阶段后，回合数默认为0，第一次回合数+1，即回合变为1，进入第一回合的交互；
- 本阶段内Z的时间大概是2-4分钟；
通用逻辑，适用于所有阶段：
PS（1）：所有开库，和所有内容库，都必然存在至少一个Z或者AZ。
PS（2）：计时达到CD时间的时候，会给完当前所在库的内容，然后进入回合判断。注意：“当前库”可以是开库，可以是内容库，也可以是离库。（如果用户进入开库/内容库/离库，获取到第一条内容后就离开了，再回来的时候就超过回合允许时间，允许用户获取该库内，这条内容后续连续的所有内容，然后直接进入大CD）
PS（3）：进入下一阶段前的大CD与同一个阶段不同回合间的大CD不完全一样。
1.5.2.1 第一回合：
1. 第一回合会筛选内容库S1的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库S1，激活离库则积分+1，离库结束后开始回合CD。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 如果客户发起了“对方找”，则积分+1，回合大CD结束，先出现一个小倒计时（后端配置的有范围随机时间），倒计时结束后，“对方找”按钮变成可点击，用户点击“对方找按钮”，将“对方找”库的内容返回给用户，最后一天对方找内容回复给用户后，则进入对方找CD时间，对方找CD时间结束，进入下一回合。如果客户没有发起“对方找”，则保持现状等待CD倒计时结束，大CD结束后进入下一回合。
1.5.2.2 第二回合：
回合数+1，回合数=2；
流程同第一回合。
1. 此回合会筛选内容库S2的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库S2，激活离库则积分+1，离库结束后开始回合CD。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 如果客户发起了“对方找”，逻辑同第一个回合。
1.5.2.3 第三回合：
回合数+1，回合数=3；
1. 此回合会筛选内容库S3的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库S2，激活离库则积分+1。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 如果积分大于等于2，则开始大CD；如果客户发起了“对方找”，则积分+1，回合大CD结束，先出现一个小倒计时（后端配置的有范围随机时间），倒计时结束后，将“对方找”库的内容返回给用户，进入下一回合。如果客户没有发起“对方找”，则保持现状等待CD倒计时结束，大CD结束后进入下一回合。
3. 如果积分小于2，则进入“延时2*大CD时间”分支，如下图：
[图片]
如果客户发起了“对方找”，逻辑同第一回合。
进入下一回合，回合数初始为4，回合数+1之后变为第5回合，即直接进入第五回合。
1.5.2.4 第四回合：
回合数+1，回合数=4；进入第四回合，则积分数肯定大于等于2。
1. 此回合会筛选内容库S4的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库S3，激活离库则积分+1。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 如果积分大于等于2，则进入3-5天的阶段CD倒计时，倒计时结束后进入第二阶段。
3. 不存在积分小于2的情况。如果积分小于2，则进入“延时2*大CD时间”分支，同第三回合的流程图。
1.5.2.5 第五回合：
  1. 此回合会筛选内容库S5的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库S2，激活离库则积分+1。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
1. 由第三回合进入，进入延迟2*大CD；如果客户发起了“对方找”，则积分+1，回合大CD结束，先出现一个小倒计时（后端配置的有范围随机时间），倒计时结束后，将“对方找”库的内容返回给用户，进入下一回合。如果客户没有发起“对方找”，则保持现状等待CD倒计时结束，大CD结束后进入下一回合。
2. 如果得分等于该用户在前三回合的总得分，则判断当前回合数，当前回合数小于6，则弹出提示板S6，用户点击确定进入第六回合。
3. 如果得分不等于该用户在前三回合的总得分，则进入3-5天的阶段CD倒计时，倒计时结束后进入第二阶段。
1.5.2.6 第六回合：
1. 此回合会筛选内容库S4.5的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库S3.5，激活离库则积分+1。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 由第五回合进入，进入延迟2*大CD；如果客户发起了“对方找”，逻辑同第一回合。
3. 如果得分等于该用户在前三回合的总得分，则判断当前回合数，当前回合数大于等于6，则弹出提示板S7，用户选择是否坚持：
  1. 如果用户选择坚持，则进入3-5天的阶段CD倒计时，倒计时结束后进入第二阶段。
  2. 如果用户放弃坚持，则弹出提示板S8，用户关闭提示板S8后，弹出提示板S9，用户在提示板S9点击确定，则结束该订单（任务），该订单（任务）从用户的订单列表中删除。
4. 如果得分不等于该用户在前三回合的总得分，则进入3-5天的阶段CD倒计时，倒计时结束后进入第二阶段。
1.5.2.7 问答分支：
同1.2.1.2的通用逻辑汇总的问答分支。
1.5.2.8 未操作超时分支：
同1.2.1.2的通用逻辑汇总的未操作超时分支。
1.6 第二阶段：
[图片]
1.6.1 不同回合选取库逻辑描述：
1.6.1.1 全部用到的库：
熟悉模块二阶段

库
第一和第二回合（详细使用见下表）
开库S1、内容库S6、内容库S7、内容库S8、内容库S9、内容库S10、内容库S11、离库S4


特殊回合a和b（详细使用见下表）
内容库S2.5、离库S3


其他
对主动库S3、问答库S2
1.6.1.2 具体各阶段使用库和CD时间：
暂时无法在飞书文档外展示此内容
1.6.2 逻辑描述：
- 本阶段内Z的时间大概是随机3-6分钟；
1.6.2.1 第一回合：
1. 第一回合会筛选开库、内容库和离库的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，开库该条内容的全链路完整发给用户，则完成了开库的选取，进入到内容库，同理如果在内容库遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库S4，激活离库则积分+1，离库结束后开始回合CD。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 下一节点不论分数是否大于X（在管理后台配置的阶段积分），都进入大CD（方便研发理解逻辑的描述）。
3. 如果客户发起了“对方找”，则积分+1，回合大CD结束，先出现一个小倒计时（后端配置的有范围随机时间），倒计时结束后，“对方找”按钮变成可点击，用户点击“对方找按钮”，将“对方找”库的内容返回给用户，最后一天对方找内容回复给用户后，则进入对方找CD时间，对方找CD时间结束，跳过开库，回合数+1，进入下一回合。如果客户没有发起“对方找”，则保持现状等待CD倒计时结束，大CD结束后进入下一回合。
1.6.2.2 第二及后续回合：
1. 此回合会筛选开库、内容库和离库的内容与用户进行交互，如果上一个回合用户选择了对方找，则会跳过开库，如果遇到Z或AZ则会进入倒计时，开库该条内容的全链路完整发给用户，则完成了开库的选取，进入到内容库，同理如果在内容库遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库，激活离库则积分+1，离库结束后开始回合CD。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 下一节点如果分数大于X（在管理后台配置的阶段积分），则进入阶段大CD，大CD结束后进入下一阶段。
3. 如果分数小于等于X（在管理后台配置的阶段积分），则进入特殊回合a。
1.6.2.3 特殊回合a：
1. 先显示提示板S10，然后进入2 * 大CD 时间的倒计时，如果客户发起了“对方找”，则积分+1，回合大CD结束，先出现一个小倒计时（后端配置的有范围随机时间），倒计时结束后，将“对方找”库的内容返回给用户，进入下一回合。如果客户没有发起“对方找”，则保持现状等待CD倒计时结束，大CD结束后进入下一回合。两种情况回合数都+1。
2. 然后筛选内容库和离库的内容与用户进行交互，在内容库遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库，激活离库则积分+1，离库结束后开始回合CD。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
3. 判断当前节点的分数与前两回合的总得分是否相等：
  1. 如果相等，判断回合数是否小于4：
    1. 如果回合数小于4，则显示提示板S11，如果用户点击坚持，则进入特殊回合b。如果用户选择不再坚持，则显示提示板S12，然后弹出提示板S14，用户点击确定则结束当前订单（任务）。
    2. 如果回合数大于等于4，则先倒计时15天，显示提示板S13确认是否有“对方找”，如果有对方找，则倒计时结束，“对方找”按钮变成可点击，用户点击“对方找按钮”，将“对方找”库的内容返回给用户，最后一天对方找内容回复给用户后，则进入对方找CD时间，对方找CD时间结束，进入下一阶段。如果没有对方找，则保持倒计时结束，然后弹出提示板S14，用户点击确定则结束当前订单（任务）。
  2. 如果不相等，则阶段CD开始，阶段CD结束后进入下一阶段。
1.6.2.4 特殊回合b：
1. 通过特殊回合a，进入3*大CD时间的倒计时，后续流程同特殊回合a。
1.6.2.5 问答分支：
同1.2.1.2的通用逻辑汇总的问答分支。
1.6.2.6 未操作超时分支：
同1.2.1.2的通用逻辑汇总的未操作超时分支。
1.7 第三阶段：
[图片]
1.7.1 不同回合选取库逻辑描述：
1.7.1.1 全部用到的库：
熟悉模块三阶段

库
第一和第二回合（详细使用见下表）
开库S2、内容库S12、内容库S13、内容库S14、内容库S15、内容库S16、离库S5


特殊回合a和b
开库S3.5、内容库S3.5、离库S3.5


其他
对主动库S4、问答库S3
1.7.1.2 具体各阶段使用库和CD时间：
暂时无法在飞书文档外展示此内容
1.7.2 逻辑描述：
- 本阶段内Z的时间大概是3-7分钟；
1.7.2.1 第一回合：
1. 第一回合会筛选开库、内容库和离库的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，开库该条内容的全链路完整发给用户，则完成了开库的选取，进入到内容库，同理如果在内容库遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库S5，激活离库则积分+1，离库结束后开始回合CD。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 下一节点不论分数是否大于X（在管理后台配置的阶段积分），都进入大CD，如果客户发起了“对方找”，则积分+1，回合大CD结束，先出现一个小倒计时（后端配置的有范围随机时间），倒计时结束后，“对方找”按钮变成可点击，用户点击“对方找按钮”，将“对方找”库的内容返回给用户，最后一天对方找内容回复给用户后，则进入对方找CD时间，对方找CD时间结束，跳过开库，回合数+1，进入下一回合。如果客户没有发起“对方找”，则保持现状等待CD倒计时结束，大CD结束后进入下一回合。
1.7.2.2 第二及后续回合：
1. 此回合会筛选开库、内容库和离库的内容与用户进行交互，如果上一个回合用户选择了对方找，则会跳过开库，如果遇到Z或AZ则会进入倒计时，开库该条内容的全链路完整发给用户，则完成了开库的选取，进入到内容库，同理如果在内容库遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，激活离库则积分+1，离库结束后开始回合CD。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
2. 下一节点如果分数大于X（在管理后台配置的阶段积分），则不需要等待大CD，直接进入下一阶段。
3. 如果分数小于等于X（在管理后台配置的阶段积分），则进入特殊回合a。
1.7.2.3 特殊回合a：
1. 先显示提示板S15，提示用户是否坚持：
  1. 如果用户放弃，则显示提示板S16，用户可以选择半价重开，如果用户点击半价重开，则结束当前订单（任务），消耗5天任务价格的50%的金币，重新开一个任务，重开的任务时长业务5天，如果该任务已经是重开任务，消耗的金币还是5天任务的50%。如果用户放弃半价重开，则结束当前订单（任务）。
  2. 如果用户选择坚持则进入下一节点。然后进入3 * 大CD 时间的倒计时，如果客户发起了“对方找”，则积分+1，回合大CD结束，先出现一个小倒计时（后端配置），倒计时结束后，对方找按钮变成可点击，用户点击此按钮，倒计时结束后，“对方找”按钮变成可点击，用户点击“对方找按钮”，将“对方找”库的内容返回给用户，最后一天对方找内容回复给用户后，则进入对方找CD时间，对方找CD时间结束，进入下一回合。如果客户没有发起“对方找”，则保持现状等待CD倒计时结束，大CD结束后按正常流程进入下一回合的开库。两种情况回合数都+1。
2. 然后筛选开库、内容库和离库的内容与用户进行交互，如果遇到Z或AZ则会进入倒计时，开库该条内容的全链路完整发给用户，则完成了开库的选取，进入到内容库，同理如果在内容库遇到Z或AZ则会进入倒计时，内容库该条内容的全链路完整发给用户，则完成了内容库的选取，进入到离开库，激活离库则积分+1。第一次遇到Z或者AZ，则启动计时器，回合允许时间倒计时开始。如果回合允许时间的倒计时结束，则继续给完当前库用户所选内容链条的后续内容，给完后该回合直接进入下一节点。
3. 判断当前节点的分数与第二回合结束的得分是否相等：
  1. 如果相等，判断回合数是否小于4：
    1. 如果回合数小于4，则显示提示板提示用户是否坚持，如果用户点击坚持，则弹出提示板S17，进入特殊回合b。如果用户选择不再坚持，则显示提示板S16，询问用户是否半价重开。如果用户点击半价重开，则结束当前订单（任务），消耗5天任务价格的50%的金币，重新开一个任务，重开的任务时长业务5天，如果该任务已经是重开任务，消耗的金币还是5天任务的50%。如果用户放弃半价重开，则结束当前订单（任务），订单列表不再显示此订单（任务）。
    2. 如果回合数大于等于4，显示提示板S18确认是否有“对方找”（这个对方找和对话主页面的对方找不同），如果用户点击对方找，关闭S18并弹出提示板S19，显示用户主动找的回复信息，用户复制对方找信息后，用户再点击确定则结束当前订单（任务）。
  2. 如果不相等，则直接进入下一阶段。
1.7.2.4 特殊回合b：
1. 通过特殊回合a，无需再次选择“是否坚持”，直接进入3*大CD时间的倒计时，后续流程同特殊回合a。
1.7.2.5 问答分支：
同1.2.1.2的通用逻辑汇总的问答分支。
1.7.2.6 未操作超时分支：
同1.2.1.2的通用逻辑汇总的未操作超时分支。
1.8 第四阶段：
[图片]
1.8.1 不同回合选取库逻辑描述：
1.8.1.1 全部用到的库：
熟悉模块四阶段
库
多聊一次（返回三阶段）
开库S2、离库S5、对主动库S4、问答库S3


马上qyy（确认交易）
内容库S17


qyy成功
内容库S18


qyy失败两次及以下
开库S2、离库S5、对主动库S4、问答库S3
1.8.1.2 回到三阶段使用库和CD时间：
暂时无法在飞书文档外展示此内容
1.8.2 逻辑描述：（第四阶段没有回合）
1. 先显示提示板S20，有三个按钮，用户可以选择马上邀约、多聊一次、暂时不做选择：
2. 如果用户点击暂时不做选择，提示板保持弹出状态，弹出Toast“请了解对方需求后，尽快进行选择”。
3. 如果用户点击多聊一次：显示提示板S21，由系统判断用户是否是第一次点击多聊一次：
  1. 如果用户是第一次点击多聊一次，则重新返回三阶段去再进行一个回合，抽取的开始和离开库不变，抽取内容库要抽取之前没有抽取到的剩余的库内容。具体逻辑：大CD开始后
    1. 如果客户发起了“对方找”，则积分+1，回合大CD结束，先出现一个小倒计时（后端配置的有范围随机时间），倒计时结束后，将“对方找”库的内容返回给用户，用户复制后，显示提示板S22，下一步提取离库S5，在下一步回到第一步显示提示板S20。
    2. 如果客户没有发起“对方找”，则保持现状等待CD倒计时结束，大CD结束后提取S2开库，用户复制后，然后显示提示板S22，下一步提取离库S5，在下一步回到第一步显示提示板S20。
  2. 如果用户不是第一次点击多聊一次，则关闭S21，回到S20。
4. 如果用户选择马上邀约：抽取内容库S17，用户选择是否邀约成功：
  1. 如果邀约成功：抽取内容库S18，用户在当前页面选择是否点击Go，如果用户点击Go，则开启延时，弹出提示板S23，用户关闭S23后显示提示板S24，用户选择是否关闭任务：
    1. 如果用户选择关闭任务：则弹出提示板S29，用户点击确定可以结束当前订单（任务），订单列表不再显示此订单（任务）。
    2. 如果用户放弃关闭任务：则弹出提示板S30，3S内自动消失，任务正常计时，在任务有效期内（刚创建任务时选择的5天、9天、16天），可以使用搜索问答。
  2. 如果邀约失败：
    1. 用户邀约小于等于2次，如果用户第一次邀约失败，则开始3 * 大CD时间的倒计时，如果用户邀约失败次数大于1，则开始5 * 大CD时间的倒计时；
    2. 用户邀约大于2次，显示提示板S25，用户选择进行指导或者关闭任务，
      ① 如果用户选择关闭任务，则显示提示板S27，用户选择半价重启任务还是关闭任务，如果用户点击半价重开，则结束当前订单（任务），消耗5天任务价格的50%的金币，重新开一个任务，重开的任务时长业务5天，如果该任务已经是重开任务，消耗的金币还是5天任务的50%。如果用户放弃半价重开，则结束当前订单（任务），订单列表不再显示此订单（任务）。
      ②如果用户选择进行指导，则给出指导提示板S26，用户选择是否关闭任务：
      （一）如果用户选择关闭任务：则弹出提示板S27，用户点击结束任务可以结束当前订单（任务），订单列表不再显示此订单（任务），用户点击半价重启，如果用户点击半价重启任务，则结束当前订单（任务），消耗5天任务价格的50%的金币，重新开一个任务，重开的任务时长业务5天，如果该任务已经是重开任务，消耗的金币还是5天任务的50%。
      （二）如果用户放弃关闭任务：则弹出提示板S30，3S内自动消失，任务正常计时，在任务有效期内（刚创建任务时选择的5天、9天、16天），可以使用搜索问答。
